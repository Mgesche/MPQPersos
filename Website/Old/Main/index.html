<!doctype html>
<html>

<head>
  <title>Marvel Quest</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="../bower_components/platform/platform.js"></script>
  <link rel="import" href="../bower_components/font-roboto/roboto.html">
  <link rel="import" href="../bower_components/core-header-panel/core-header-panel.html">
  <link rel="import" href="../bower_components/core-toolbar/core-toolbar.html">
  <link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
  <link rel="import" href="../bower_components/core-icon-button/core-icon-button.html">
  <link rel="import" href="heros-list.html">
  <link rel="import" href="heros-choix.html">
  <link rel="import" href="technique-list.html">
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55130339-1', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>

  <style>
  html,body {
    height: 100%;
    margin: 0;
    background-color: #E5E5E5;
    font-family: 'RobotoDraft', sans-serif;
  }
  .container {
    width: 80%;
    margin: 50px auto;
  }
  @media screen {
	#tabs {
		width: 33%;
	}
	.container {
		width: 80%;
	}
  }
  @media handheld (min-width: 481px) {
    #tabs {
      width: 200px;
	  font-size: 1rem;
    }
    .container {
      width: 400px;
    }
  }
  
	core-header-panel {
	  height: 100%;
	  overflow: auto;
	  -webkit-overflow-scrolling: touch; 
	}

	core-toolbar {
	  background: #03a9f4;
	  color: white;
	}

	#tabs {
	  width: 100%;
	  margin: 0;
	  -webkit-user-select: none;
	  -moz-user-select: none;
	  -ms-user-select: none;
	  user-select: none;
	}

	.icon_star {
	  fill: #EDFE00;
	  stroke: black;
	}
	
	.icon_add {
	  fill: #a4c639;
	}
	
	.cacher {
		display: none;
	}
	
  </style>
</head>

<body unresolved touch-action="auto">

  <core-header-panel>
    
  <core-toolbar>
    <paper-tabs id="tabs" valueattr="name" selected="all" self-end>
      <paper-tab name="Heros">Heros disponibles</paper-tab>
      <paper-tab name="Equipes">Mes équipes</paper-tab>
      <paper-tab name="Combat">Combat</paper-tab>
	  <paper-tab name="Recherche">Recherche</paper-tab>
    </paper-tabs>
  </core-toolbar>

  <!-- main page content will go here --> 
  <div class="tabHeros cacher">
  <div class="container" layout vertical wrap center>
	<div layout horizontal>
		Mes Heros
	</div>
	<heros-list id="listMesHeros" filter="" nom="listMesHeros" debug="true"></heros-list>
	<div layout horizontal>
		<core-icon class="icon_star" icon="star"></core-icon>
		<core-icon class="icon_star" icon="star"></core-icon>
		<core-icon class="icon_star" icon="star"></core-icon>
		<core-icon class="icon_star" icon="star"></core-icon>
	</div>
	<heros-list id="list4Star" filter="Puissance=4" nom="list4Star" debug="true"></heros-list>
	<div layout horizontal>
		<core-icon class="icon_star" icon="star"></core-icon>
		<core-icon class="icon_star" icon="star"></core-icon>
		<core-icon class="icon_star" icon="star"></core-icon>
	</div>
	<heros-list id="list3Star" filter="Puissance=3" nom="list3Star" debug="true"></heros-list>
	<div layout horizontal>
		<core-icon class="icon_star" icon="star"></core-icon>
		<core-icon class="icon_star" icon="star"></core-icon>
	</div>
	<heros-list id="list2Star" filter="Puissance=2" nom="list2Star" debug="true"></heros-list>
	<div layout horizontal>
		<core-icon class="icon_star" icon="star"></core-icon>
	</div>
	<heros-list id="list1Star" filter="Puissance=1" nom="list1Star" debug="true"></heros-list>
  </div>
  </div>
  
  <div class="tabEquipes cacher">
	<div>
		Perso 1 : <heros-choix nom="choixHeros1" filter="puissance=1"></heros-choix>
		<core-icon-button class="icon_add" icon="add-circle"></core-icon>
	</div>
	<div>
		Perso 2 : <heros-choix nom="choixHeros2" filter="puissance=2"></heros-choix>
		<core-icon-button class="icon_add" icon="add-circle"></core-icon>
	</div>
	<div>
		Perso 3 : <heros-choix nom="choixHeros3" filter="puissance=3"></heros-choix>
		<core-icon-button class="icon_add" icon="add-circle"></core-icon>
	</div>
  </div>
  
  <div class="tabCombat cacher">
  </div>
  
  <div class="tabRecherche">
	<div class="container" layout vertical wrap center>
		<div>
			<SELECT id="CbPuissance">
				<OPTION value="All" selected>Tous</option>
				<OPTION value="1">1*</option>
				<OPTION value="2">2*</option>
				<OPTION value="3">3*</option>
				<OPTION value="4">4*</option>
			</SELECT>
			<SELECT id="CbCouleur">
				<OPTION value="All" selected>Toutes</option>
				<OPTION value="Jaune">Jaune</option>
				<OPTION value="Rouge">Rouge</option>
				<OPTION value="Bleu">Bleu</option>
				<OPTION value="Violet">Violet</option>
				<OPTION value="Vert">Vert</option>
				<OPTION value="Noir">Noir</option>
			</SELECT>
			<SELECT id="CbTypeAttaque">
				<OPTION value="All" selected>Toutes</option>
				<OPTION value="Tank">Tank : Protege une cible</option>
				<OPTION value="Protection">Protection : Protege l'equipe</option>
				<OPTION value="Amelioration">Amelioration : Augmente les degats ou place une attaque</option>
				<OPTION value="Degat">Degat : Degat direct</option>
				<OPTION value="Destruction">Destruction : Detruit des couleurs</option>
				<OPTION value="Piege">Piége : Dégat décalés dans le temps</option>
				<OPTION value="Soin">Soin : Soigne l'equipe</option>
				<OPTION value="Ressources">Ressources : Vole ou transforme des couleurs</option>
				<OPTION value="Paralysie">Paralysie : Paralyse</option>
				<OPTION value="Aucune">Aucune : Aucune attaque</option>
			</SELECT>
		</div>
		<div>
			<heros-choix id="HerosChoixRecherche" nom="choixHeros" filter=""></heros-choix>
		</div>
		<div>
			<heros-list id="listHerosRecherche" filter="" nom="listHerosRecherche" debug="false"></heros-list>
		</div>
		<div>
			<technique-list id="listTechniqueRecherche" filter="" nom="listTechniqueRecherche" debug="true"></technique-list>
		</div>
		<div>
			<core-icon-button class="icon_add" icon="add-circle"></core-icon>
		</div>
  </div>

  </core-header-panel>
<script>
  var tabs = document.querySelector('paper-tabs');

  tabs.addEventListener('core-select', function() {
    console.log("Selected: " + tabs.selected);
	
	$(".tabHeros").addClass("cacher");
	$(".tabEquipes").addClass("cacher");
	$(".tabCombat").addClass("cacher");
	$(".tabRecherche").addClass("cacher");
	
	if(tabs.selected=="Heros") {
		$(".tabHeros").removeClass("cacher");
	}
	if(tabs.selected=="Equipes") {
		$(".tabEquipes").removeClass("cacher");
	}
	if(tabs.selected=="Combat") {
		$(".tabCombat").removeClass("cacher");
	}
	if(tabs.selected=="Recherche") {
		$(".tabRecherche").removeClass("cacher");
	}
  });
  
  $("heros-list").on('heros-add', function() {
	$("#listMesHeros").trigger("addHeros", [{uid:"4_Nick_Fury"}]);
  });
  
  $("#CbPuissance").change(function() {
	  var Puissance = $("#CbPuissance").val();
	  var Couleur = $("#CbCouleur").val();
	  var TypeAttaque = $("#CbTypeAttaque").val();
	  var strFilter = "";
	  
	  if(Puissance != "All") {
		if(strFilter != "") {
			strFilter = strFilter + ";";
		}
		strFilter = strFilter + "Puissance=" + Puissance;
	  }
	  
	  if(Couleur != "All") {
		if(strFilter != "") {
			strFilter = strFilter + ";";
		}
		strFilter = strFilter + "Couleur=" + Couleur;
	  }
	  
	  if(TypeAttaque != "All") {
		if(strFilter != "") {
			strFilter = strFilter + ";";
		}
		strFilter = strFilter + "TypeAttaque=" + TypeAttaque;
	  }
	  //console.log(strFilter);
	  $("#HerosChoixRecherche").attr('filter', strFilter);
	  $("#listHerosRecherche").attr('filter', strFilter);
	  $("#listTechniqueRecherche").attr('filter', strFilter);
  });
  
  $("#CbCouleur").change(function() {
	  var Puissance = $("#CbPuissance").val();
	  var Couleur = $("#CbCouleur").val();
	  var TypeAttaque = $("#CbTypeAttaque").val();
	  var strFilter = "";
	  
	  if(Puissance != "All") {
		if(strFilter != "") {
			strFilter = strFilter + ";";
		}
		strFilter = strFilter + "Puissance=" + Puissance;
	  }
	  
	  if(Couleur != "All") {
		if(strFilter != "") {
			strFilter = strFilter + ";";
		}
		strFilter = strFilter + "Couleur=" + Couleur;
	  }
	  
	  if(TypeAttaque != "All") {
		if(strFilter != "") {
			strFilter = strFilter + ";";
		}
		strFilter = strFilter + "TypeAttaque=" + TypeAttaque;
	  }
	  //console.log(strFilter);
	  $("#HerosChoixRecherche").attr('filter', strFilter);
	  $("#listHerosRecherche").attr('filter', strFilter);
	  $("#listTechniqueRecherche").attr('filter', strFilter);
  });
  
  $("#CbTypeAttaque").change(function() {
	  var Puissance = $("#CbPuissance").val();
	  var Couleur = $("#CbCouleur").val();
	  var TypeAttaque = $("#CbTypeAttaque").val();
	  var strFilter = "";
	  
	  if(Puissance != "All") {
		if(strFilter != "") {
			strFilter = strFilter + ";";
		}
		strFilter = strFilter + "Puissance=" + Puissance;
	  }
	  
	  if(Couleur != "All") {
		if(strFilter != "") {
			strFilter = strFilter + ";";
		}
		strFilter = strFilter + "Couleur=" + Couleur;
	  }
	  
	  if(TypeAttaque != "All") {
		if(strFilter != "") {
			strFilter = strFilter + ";";
		}
		strFilter = strFilter + "TypeAttaque=" + TypeAttaque;
	  }
	  //console.log(strFilter);
	  $("#HerosChoixRecherche").attr('filter', strFilter);
	  $("#listHerosRecherche").attr('filter', strFilter);
	  $("#listTechniqueRecherche").attr('filter', strFilter);
  });

</script>
</body>

</html>
